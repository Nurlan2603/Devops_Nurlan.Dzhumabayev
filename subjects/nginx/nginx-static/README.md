# nginx-static

–í–∞–∂–Ω–æ–π –∑–∞–¥–∞—á–µ–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ —è–≤–ª—è–µ—Ç—Å—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–ª–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö HTML-—Å—Ç—Ä–∞–Ω–∏—Ü).

–í —ç—Ç–æ–º —É—Ä–æ–∫–µ –º—ã —Ä–µ–∞–ª–∏–∑—É–µ–º –ø—Ä–∏–º–µ—Ä, –≥–¥–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞–ø—Ä–æ—Å–∞ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å—Å—è –∏–∑ —Ä–∞–∑–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π:

- `/var/www/example/web-site`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ–∞–π–ª—ã HTML
- `/var/www/example/images`, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.

> üïπ –ó–∞–ø—É—Å–∫–∞–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –Ω–∞ —Å–≤–æ–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º `nginx`

–≠—Ç–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–ª–æ–∫–∞ `server` –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞ `http` —Å –¥–≤—É–º—è –±–ª–æ–∫–∞–º–∏ `location`.

1. –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `/var/www/example/web-site` –∏ –ø–æ–º–µ—Å—Ç–∏—Ç–µ –≤ –Ω–µ–≥–æ —Ñ–∞–π–ª [index.html](https://stepik.org/media/attachments/lesson/686238/index.html).
2. –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `/var/www/example/images` –∏ –ø–æ–º–µ—Å—Ç–∏—Ç–µ –≤ –Ω–µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ [–∞—Ä—Ö–∏–≤–∞](https://stepik.org/media/attachments/lesson/686238/cats.zip).
3. –î–∞–ª–µ–µ –ø–µ—Ä–µ–Ω–∞—Å—Ç—Ä–æ–∏–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞, —É–¥–∞–ª–∏–º —Ñ–∞–π–ª `/etc/nginx/conf.d/default.conf`.
4. –°–æ–∑–¥–∞–¥–∏–º –Ω–æ–≤—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª `/etc/nginx/conf.d/example.conf`.
5. –û—Ç–∫—Ä–æ–µ–º —Ñ–∞–π–ª –∏ –Ω–∞—á–Ω–µ–º —Å `server` –±–ª–æ–∫–∞.

```nginx
server {

}
```

–ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å –≤ —Å–µ–±—è –Ω–µ—Å–∫–æ–ª—å–∫–æ `server` –±–ª–æ–∫–æ–≤, –æ—Ç–ª–∏—á–∞—é—â–∏—Ö—Å—è [–ø–æ—Ä—Ç–∞–º–∏](http://nginx.org/en/docs/http/request_processing.html), –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∏ [–ø—Ä–æ—Å–ª—É—à–∏–≤–∞—é—Ç](http://nginx.org/en/docs/http/ngx_http_core_module.html#listen), –∏ [–∏–º–µ–Ω–∞–º–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤](http://nginx.org/en/docs/http/server_names.html). –ö–∞–∫ —Ç–æ–ª—å–∫–æ nginx —Ä–µ—à–∞–µ—Ç, –∫–∞–∫–æ–π `server` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å, –æ–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç URI, —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –∑–∞–ø—Ä–æ—Å–∞, –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º –¥–∏—Ä–µ–∫—Ç–∏–≤ `location`, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞ `server`.

6. –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –±–ª–æ–∫ `location` –≤ –±–ª–æ–∫ `server`:

```nginx
location / {
    root /var/www/example/web-site;
}
```

–ë–ª–æ–∫ `location` —É–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–µ—Ñ–∏–∫—Å `/` –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å URI –∏–∑ –∑–∞–ø—Ä–æ—Å–∞. –î–ª—è —Å–æ–≤–ø–∞–¥–∞—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ø—É—Ç–∏, —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –≤ –¥–∏—Ä–µ–∫—Ç–∏–≤–µ `root`, —Ç–æ –µ—Å—Ç—å –∫ `/var/www/example/web-site`, –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω URI, —á—Ç–æ–±—ã —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø—É—Ç—å –∫ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–æ–º—É —Ñ–∞–π–ª—É –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ.

–ï—Å–ª–∏ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–≤–ø–∞–¥–∞—é—â–∏—Ö –±–ª–æ–∫–æ–≤ `location`, nginx –≤—ã–±–∏—Ä–∞–µ—Ç –±–ª–æ–∫ —Å —Å–∞–º—ã–º –¥–ª–∏–Ω–Ω—ã–º –ø—Ä–µ—Ñ–∏–∫—Å–æ–º.
–í—ã—à–µ–ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π –±–ª–æ–∫ `location` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–∞–º—ã–π –∫–æ—Ä–æ—Ç–∫–∏–π –ø—Ä–µ—Ñ–∏–∫—Å –¥–ª–∏–Ω—ã –æ–¥–∏–Ω, –ø–æ—ç—Ç–æ–º—É —ç—Ç–æ—Ç –±–ª–æ–∫ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –±–ª–æ–∫–∏ `location` –Ω–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è.

7. –ó–∞—Ç–µ–º –¥–æ–±–∞–≤—å—Ç–µ –≤—Ç–æ—Ä–æ–π –±–ª–æ–∫ `location`:

```nginx
location /images/ {
    root /var/www/example;
}
```

–≠—Ç–æ –±—É–¥–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å–∞–º, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å `/images/` (–±–ª–æ–∫ `location` `/` —Ç–∞–∫–∂–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–∞–∫–∏–º –∑–∞–ø—Ä–æ—Å–∞–º, –Ω–æ –∏–º–µ–µ—Ç –±–æ–ª–µ–µ –∫–æ—Ä–æ—Ç–∫–∏–π –ø—Ä–µ—Ñ–∏–∫—Å).

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–ª–æ–∫–∞ `server` –¥–æ–ª–∂–Ω–∞ –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```nginx
server {
    location / {
        root /var/www/example/web-site;
    }

    location /images/ {
        root /var/www/example;
    }
}
```

–≠—Ç–æ —É–∂–µ —Ä–∞–±–æ—á–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –ø–æ—Ä—Ç 80. –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost/`.

–í –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã —Å URI, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å `/images/`, —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–∞–π–ª—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ `/var/www/example/images`. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å `http://localhost/images/example.png` nginx –æ—Ç–ø—Ä–∞–≤–∏—Ç —Ñ–∞–π–ª `/var/www/example/images/example.png`. –ï—Å–ª–∏ —Ç–∞–∫–æ–≥–æ —Ñ–∞–π–ª–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, nginx –æ—Ç–ø—Ä–∞–≤–∏—Ç –æ—Ç–≤–µ—Ç —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –æ—à–∏–±–∫–∏ 404.

–ó–∞–ø—Ä–æ—Å—ã —Å URI, –Ω–µ –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å `/images/`, –±—É–¥—É—Ç —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω—ã —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º `/var/www/example/web-site`. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å `http://localhost/some/example.html` nginx –æ—Ç–ø—Ä–∞–≤–∏—Ç —Ñ–∞–π–ª `/data/www/some/example.html`.

–ß—Ç–æ–±—ã –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é, –∑–∞–ø—É—Å—Ç–∏—Ç–µ nginx, –µ—Å–ª–∏ –æ–Ω –µ—â–µ –Ω–µ –∑–∞–ø—É—â–µ–Ω, –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–∏–≥–Ω–∞–ª –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –≥–ª–∞–≤–Ω–æ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É nginx, –≤—ã–ø–æ–ª–Ω–∏–≤:

```bash
nginx -s reload
# –∏–ª–∏
systemctl reload nginx
# –∏–ª–∏
service nginx reload
```

> –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–æ–ª–∂–Ω—ã–º –æ–±—Ä–∞–∑–æ–º, –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –≤—ã—è—Å–Ω–∏—Ç—å –ø—Ä–∏—á–∏–Ω—É –≤ —Ñ–∞–π–ª–∞—Ö `access.log`
> –∏ `error.log` –≤ –∫–∞—Ç–∞–ª–æ–≥–µ `/var/log/nginx`.

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–°–æ–∑–¥–∞–Ω–∏–µ server –±–ª–æ–∫–æ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–æ—Ä—Ç–∞–º–∏](http://nginx.org/en/docs/http/request_processing.html)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ server –±–ª–æ–∫–∞: listen](http://nginx.org/en/docs/http/ngx_http_core_module.html#listen)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ server –±–ª–æ–∫–∞: –∏–º—è —Å–µ—Ä–≤–µ—Ä–∞](http://nginx.org/en/docs/http/server_names.html)
